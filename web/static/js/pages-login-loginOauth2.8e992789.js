(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-loginOauth2"],{"33c6":function(t,e,i){"use strict";var a=i("709a"),n=i.n(a);n.a},"42dd":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"zai-box"},[e("v-uni-view",{staticClass:"cu-load load-modal"},[e("v-uni-image",{staticClass:"round",attrs:{src:"https://static.jeecg.com/upload/test/login4_1595818039175.png",mode:"aspectFit"}}),e("v-uni-view",{staticClass:"gray-text"},[this._v("正在登录中...")])],1)],1)},n=[]},"709a":function(t,e,i){var a=i("d6b4");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("967d").default;n("65e3630e",a,!0,{sourceMap:!1,shadowMode:!1})},"9cb8":function(t,e,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("9b1b"));i("5c47"),i("a1c1"),i("0506"),i("af8f"),i("5ef2"),i("45da"),i("c223");i("3ba3");var o=i("8f59"),r=i("a7b5"),s=a(i("6af4")),d={data:function(){return{loading:!1,env:{thirdType:"",thirdApp:!1,wxWork:!1,dingtalk:!1},redirectUrl:""}},beforeCreate:function(){(0,r.isOAuth2AppEnv)()||this.$Router.replace({name:"login"})},created:function(){this.checkEnv(),this.doOAuth2Login()},methods:(0,n.default)((0,n.default)({},(0,o.mapActions)(["ThirdLogin"])),{},{checkEnv:function(){/wxwork/i.test(navigator.userAgent)&&(this.env.thirdApp=!0,this.env.wxWork=!0),/dingtalk/i.test(navigator.userAgent)&&(this.env.thirdApp=!0,this.env.dingtalk=!0)},doOAuth2Login:function(){if(this.env.thirdApp){this.redirectUrl="";var t=window.location.search;if(t.indexOf("hasToken")>0){var e=(0,r.getUrlParams)(t);e.params.redirect?(this.redirectUrl=decodeURIComponent(decodeURIComponent(e.params.redirect)),this.goRedirectUrl()):alert("hasToken参数错误!")}else if(t.indexOf("oauth2LoginToken")>0){var i=(0,r.getUrlParams)(t);this.env.thirdType=i.params.thirdType;var a=i.params.oauth2LoginToken;i.params.redirect&&(this.redirectUrl=decodeURIComponent(i.params.redirect)),this.doThirdLogin(a)}else this.env.wxWork?this.doWechatEnterpriseOAuth2Login():this.env.dingtalk&&this.doDingTalkOAuth2Login()}},doThirdLogin:function(t){var e=this;this.ThirdLogin({token:t,thirdType:this.env.thirdType}).then((function(t){t.data.success?e.loginSuccess():e.requestFailed(t)})).catch((function(t){alert(t.message||t)}))},loginSuccess:function(){this.$Router.replaceAll({name:"index"})},requestFailed:function(t){this.$message.warning("登录失败")},goRedirectUrl:function(){var t=(0,r.getUrlParams)(this.redirectUrl),e=t.url,i=t.params;if(i.info){var a=JSON.parse(i.info),n={instanceId:a.procInsId,taskId:a.taskId,taskDefKey:a.taskDefKey};1==a.claim&&(n["claim"]=1),this.$Router.replaceAll({path:e,query:n})}else this.$Router.replaceAll({path:e})},doWechatEnterpriseOAuth2Login:function(){this.sysOAuth2Login("wechat_enterprise")},doDingTalkOAuth2Login:function(){this.sysOAuth2Login("dingtalk")},sysOAuth2Login:function(t){var e=s.default.apiUrl,i="".concat(e,"/sys/thirdLogin/oauth2/").concat(t,"/login"),a=window.location.origin+window.location.search;i+="?state=".concat(encodeURIComponent(a)),console.log("sysOAuth2Login====》",i),window.location.href=i}})};e.default=d},b1d3:function(t,e,i){"use strict";i.r(e);var a=i("42dd"),n=i("d694");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("33c6");var r=i("828b"),s=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"2ff35193",null,!1,a["a"],void 0);e["default"]=s.exports},d694:function(t,e,i){"use strict";i.r(e);var a=i("9cb8"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},d6b4:function(t,e,i){var a=i("c86c");e=a(!1),e.push([t.i,".login-paddingtop[data-v-2ff35193]{padding-top:100 upx}.zai-box[data-v-2ff35193]{padding:0 20 upx;padding-top:100 upx;position:relative}.zai-logo[data-v-2ff35193]{width:200 upx;height:150px}.zai-title[data-v-2ff35193]{font-size:58 upx;color:#000;text-align:center}.input-placeholder[data-v-2ff35193], .zai-input[data-v-2ff35193]{color:#94afce}.zai-label[data-v-2ff35193]{padding:60 upx 0;text-align:center;font-size:30 upx;color:#a7b6d0}.zai-btn[data-v-2ff35193]{background:#ff65a3;color:#fff;border:0;border-radius:100 upx;font-size:36 upx}.zai-btn[data-v-2ff35193]:after{border:0}\n\n/*按钮点击效果*/.zai-btn.button-hover[data-v-2ff35193]{-webkit-transform:translate(1 upx,1 upx);transform:translate(1 upx,1 upx)}",""]),t.exports=e}}]);